(this["webpackJsonpchess-client"]=this["webpackJsonpchess-client"]||[]).push([[0],{136:function(e,t,i){e.exports=i(295)},141:function(e,t,i){},142:function(e,t,i){},234:function(e,t,i){},291:function(e,t,i){},295:function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a),o=i(13),r=i.n(o),l=(i(141),i(142),i(143),i(81)),s=i.n(l),c=i(38),h=i(39),u=i(80),m=i(79),p=(i(97),function(e){Object(u.a)(i,e);var t=Object(m.a)(i);function i(){var e;Object(c.a)(this,i);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={current:"home"},e.handleClick=function(t){console.log("click ",t),e.setState({current:t.key})},e}return Object(h.a)(i,[{key:"render",value:function(){var e=this.state.current;return n.a.createElement(s.a,{onClick:this.handleClick,selectedKeys:[e],mode:"horizontal"},n.a.createElement(s.a.Item,{key:"home"},"home"),n.a.createElement(s.a.Item,{key:"login"},"login"))}}]),i}(a.Component)),g=i(47),f=i(22),v=(i(122),i(35)),k=i.n(v),d=(i(222),i(78)),y=i.n(d),w=(i(124),i(71)),C=i.n(w),b=(i(88),i(50)),E=i.n(b),P=(i(232),i(135)),T=i.n(P),B=i(72),V=(i(234),i(134)),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KQkq",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(c.a)(this,e),this.Tiles=M(t),this.Castle=i,this.Winner="none",this.Passant=a}return Object(h.a)(e,[{key:"getWinner",value:function(){return this.Winner}},{key:"getPiece",value:function(e,t){return this.Tiles[e][t].getPiece()}},{key:"movePiece",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Queen",o=this.Tiles[e][t],r=this.Tiles[i][a],l=r.getPiece();switch("King"===l&&(this.Winner="white"===r.getColor()?"Black":"White"),r.piece=o.piece,o.getPiece()){case"Pawn":this.validPassant(o,r)&&(l="Pawn",this.Tiles[i][t].piece="empty"),this.setPassant(o,r),this.handlePromotion(o,r,n);break;case"King":this.handleCastle(o,r),this.disableCastle(o);break;case"Rook":this.disableCastle(o)}return o.piece="empty",l}},{key:"validPassant",value:function(e,t){return"Pawn"===e.getPiece()&&""+t.row+t.col===this.Passant}},{key:"setPassant",value:function(e,t){if(2===Math.abs(t.row-e.row)){var i="white"===e.getColor()?1:-1;this.Passant=""+(e.row+i)+e.col}}},{key:"handlePromotion",value:function(e,t,i){0!==t.row&&7!==t.row||(t.piece=e.getColor()+i)}},{key:"handleCastle",value:function(e,t){Math.abs(t.col-e.col)>1&&(2===t.col?this.movePiece(e.row,0,e.row,3):6===t.col&&this.movePiece(e.row,7,e.row,5))}},{key:"disableCastle",value:function(e){var t="King"===e.getPiece()?"KQ":0===e.col?"Q":"K";"black"===e.getColor()&&(t=t.toLowerCase());var i=new RegExp(t,"");this.Castle=this.Castle.replace(i,"")}},{key:"getValidTiles",value:function(e,t){var i=this.Tiles[e][t],a=i.getColor(),n=[];switch(i.getPiece()){case"Rook":this.getValidRookTiles(t,e,a,n);break;case"Knight":this.getValidKnightTiles(t,e,a,n);break;case"Bishop":this.getValidBishopTiles(t,e,a,n);break;case"King":this.getValidKingTiles(t,e,a,n);break;case"Queen":this.getValidBishopTiles(t,e,a,n),this.getValidRookTiles(t,e,a,n);break;case"Pawn":this.getValidPawnTiles(t,e,a,n)}return n}},{key:"getValidKnightTiles",value:function(e,t,i,a){for(var n=1;n<3;n++){var o=3-n;this.pushToValid(t+n,e+o,i,a),this.pushToValid(t+n,e-o,i,a),this.pushToValid(t-n,e-o,i,a),this.pushToValid(t-n,e+o,i,a)}}},{key:"getValidRookTiles",value:function(e,t,i,a){for(var n=[-1,0,0,1],o=[0,-1,1,0],r=0;r<4;r++)for(var l=n[r]+t,s=o[r]+e;this.pushToValid(l,s,i,a);)l+=n[r],s+=o[r]}},{key:"getValidBishopTiles",value:function(e,t,i,a){for(var n=0;n<5;n++)for(var o=n<1.5?1:-1,r=e+o,l=n%2?1:-1,s=t+l;this.pushToValid(s,r,i,a);)r+=o,s+=l}},{key:"getValidKingTiles",value:function(e,t,i,a){for(var n=-1;n<2;n++)for(var o=-1;o<2;o++)this.pushToValid(t+n,e+o,i,a);var r="white"===i?0:7;("white"===i&&this.Castle.includes("K")||"black"===i&&this.Castle.includes("k"))&&"empty"===this.Tiles[r][6].getColor()&&"empty"===this.Tiles[r][5].getColor()&&a.push(this.Tiles[r][6]),("white"===i&&this.Castle.includes("Q")||"black"===i&&this.Castle.includes("q"))&&"empty"===this.Tiles[r][1].getColor()&&"empty"===this.Tiles[r][2].getColor()&&"empty"===this.Tiles[r][3].getColor()&&a.push(this.Tiles[r][2])}},{key:"getValidPawnTiles",value:function(e,t,i,a){for(var n=1===t||6===t?3:2,o="white"===i?1:-1,r=1;r<n;r++){if("empty"!==this.Tiles[t+r*o][e].piece)break;this.pushToValid(t+r*o,e,i,a)}this.pushToValidPawn(t+o,e+1,i,a),this.pushToValidPawn(t+o,e-1,i,a)}},{key:"pushToValid",value:function(e,t,i,a){if(e>7||e<0||t>7||t<0)return!1;var n=this.Tiles[e][t];return"empty"===n.getColor()?(a.push(n),!0):(n.getColor()!==i&&a.push(n),!1)}},{key:"pushToValidPawn",value:function(e,t,i,a){if(e>-1&&e<8&&t>-1&&t<8){var n=this.Tiles[e][t];(""+n.row+n.col===this.Passant||"empty"!==n.getColor()&&n.getColor()!==i||""+n.row+n.col===this.Passant)&&a.push(n)}}},{key:"clone",value:function(){return new e(this.Tiles.map((function(e){return e.map((function(e){return e.piece}))})),this.Castle,this.Passant)}}]),e}();function M(e){for(var t=[],i=0;i<8;i++){for(var a=[],n=0;n<8;n++)a.push(new L(i,n,e[i][n]));t.push(a)}return t}function j(){for(var e=[],t=0;t<8;t++){for(var i=[],a=0;a<8;a++)i.push(K(t,a));e.push(i)}return e}function K(e,t){if(e<1)switch(Math.abs(7-2*t)){case 7:return"whiteRook";case 5:return"whiteKnight";case 3:return"whiteBishop";case 1:return 4===t?"whiteKing":"whiteQueen";default:return"empty"}else{if(e<2)return"whitePawn";if(e<6)return"empty";if(e<7)return"blackPawn";if(e<8)switch(Math.abs(7-2*t)){case 7:return"blackRook";case 5:return"blackKnight";case 3:return"blackBishop";case 1:return 4===t?"blackKing":"blackQueen";default:return"empty"}}}var L=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.generatePiece(t,i);Object(c.a)(this,e),this.row=t,this.col=i,this.piece=a}return Object(h.a)(e,[{key:"getColor",value:function(){return this.piece.substr(0,5)}},{key:"getPiece",value:function(){return this.piece.substr(5)}},{key:"clone",value:function(){return new e(this.row,this.col,this.piece)}}]),e}(),N={Queen:90,King:2e3,Rook:50,Knight:30,Bishop:30,Pawn:10,"":0};function W(e,t,i){if(0===i){return{futureMove:"",futureValue:0}}var a="white"===t?"black":"white";i=Math.min(i,5);for(var n="",o="nodef",r=function(r){for(var l=function(l){e.Tiles[r][l].piece.substr(0,5)===t&&e.getValidTiles(r,l).forEach((function(s){var c=e.clone(),h=N[c.movePiece(r,l,s.row,s.col)],u=W(c,a,i-1),m=u.futureMove,p=u.futureValue;"white"===t?("nodef"===o||h+p>o)&&(o=p+h,n=""+r+l+s.row+s.col+m):("nodef"===o||-h+p<o)&&(o=p-h,n=""+r+l+s.row+s.col+m)}))},s=0;s<8;s++)l(s)},l=0;l<8;l++)r(l);return{futureMove:n,futureValue:o}}function R(){var e=Object(V.a)([""]);return R=function(){return e},e}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.afterVictoryCallback,a=void 0===i?function(){}:i,n=t.computerOption,o=void 0===n?"local":n,r=t.playerColor,l=void 0===r?"white":r;Object(c.a)(this,e),console.log(o),console.log(l),this.getComputerMove=W,this.ChessLogic=new O,this.Blocks=this.generateBlocks(),this.turn="white",this.emptyBlock="empty",this.selectedBlock=this.emptyBlock,this.computerOption=o,this.playerColor=l,this.moveList=[],this.aftermatch=!1,this.showVictoryScreen=a}return Object(h.a)(e,[{key:"handleClick",value:function(e){this.turn!==this.playerColor&&"computer"===this.computerOption||("empty"===this.selectedBlock||"empty"===this.selectedBlock.getPiece()?this.turn===e.getColor()&&(this.highlight(e),this.selectedBlock=e):this.movePiece(e)&&(this.turn="white"===this.turn?"black":"white",this.recordMove(e.getPiece().substr(5),e.row,e.col),this.checkWinner()))}},{key:"handleComputerTurn",value:function(){if(this.turn!==this.playerColor&&"computer"===this.computerOption){var e=W(this.ChessLogic,this.turn,3).futureMove.split(R()).map((function(e){return+e}));this.recordMove(this.ChessLogic.getPiece(e[0],e[1]),e[2],e[3]),this.ChessLogic.movePiece(e[0],e[1],e[2],e[3]),this.turn="white"===this.turn?"black":"white",this.checkWinner()}}},{key:"recordMove",value:function(e,t,i){this.moveList.push(this.moveList.length+1+". \t"+e+" move to "+String.fromCharCode(i+65)+(t+1))}},{key:"checkWinner",value:function(){"none"===this.ChessLogic.getWinner()||this.aftermatch||(this.aftermatch=!0,this.showVictoryScreen(this.ChessLogic.getWinner()))}},{key:"movePiece",value:function(e){var t=!1;return"HighlightBlock"===e.type&&(this.ChessLogic.movePiece(this.selectedBlock.row,this.selectedBlock.col,e.row,e.col),t=!0),this.selectedBlock=this.emptyBlock,this.unhighlight(),t}},{key:"highlight",value:function(e){var t=this;this.ChessLogic.getValidTiles(e.row,e.col).forEach((function(e){return t.getBlock(e).highlight()}))}},{key:"unhighlight",value:function(){this.Blocks.forEach((function(e){return e.forEach((function(e){return e.unhighlight()}))}))}},{key:"generateBlocks",value:function(){for(var e=[],t=0;t<8;t++){for(var i=[],a=0;a<8;a++)i.push(new Q(t,a,this.ChessLogic.Tiles[t][a]));e.push(i)}return e}},{key:"getBlock",value:function(e){return this.Blocks[e.row][e.col]}}]),e}(),Q=function(){function e(t,i,a){Object(c.a)(this,e),this.row=t,this.col=i,this.tile=a,this.unhighlight()}return Object(h.a)(e,[{key:"highlight",value:function(){this.type="HighlightBlock"}},{key:"unhighlight",value:function(){this.type=(this.row+this.col)%2?"LightBlock":"DarkBlock"}},{key:"getColor",value:function(){return this.tile.getColor()}},{key:"getPiece",value:function(){return this.tile.getColor()+this.tile.getPiece()}}]),e}(),I=S,q=function(e){Object(u.a)(i,e);var t=Object(m.a)(i);function i(e){var a;return Object(c.a)(this,i),a=t.call(this,e),console.log(e.location.state),void 0===e.location.state&&(e.location.state={computerOption:"local",playerColor:"white"}),a.ChessController=new I({afterVictoryCallback:a.showVictoryScreen,computerOption:e.location.state.computerOption,playerColor:e.location.state.playerColor}),a.state={Blocks:a.ChessController.Blocks},a.handleClick=a.handleClick.bind(Object(B.a)(a)),a}return Object(h.a)(i,[{key:"handleClick",value:function(e){var t=this;this.ChessController.handleClick(e),this.forceUpdate(),setTimeout((function(){t.ChessController.handleComputerTurn(),t.forceUpdate()}),1)}},{key:"getImagePath",value:function(e){return"".concat("pieceImages/",e,".png")}},{key:"showVictoryScreen",value:function(e){T.a.info({title:e+" Wins!",content:n.a.createElement("div",null,n.a.createElement("p",null,"Return to main menu for new game")),onOk:function(){}})}},{key:"renderBoard",value:function(){var e=this,t=this.state.Blocks.slice(0).reverse().map((function(t){var i=t.map((function(t){return n.a.createElement("div",{key:t.col+8*t.row,onClick:e.handleClick.bind(e,t),className:t.type},"empty"===t.getPiece()?null:n.a.createElement("img",{src:e.getImagePath(t.getPiece()),className:t.type+"Piece",alt:t.getPiece()}))}));return n.a.createElement(E.a,{key:i[0].key/8},i)}));return n.a.createElement("div",{className:"Square"},t)}},{key:"renderMenu",value:function(){return n.a.createElement(k.a,{className:"SideMenu"},n.a.createElement(g.b,{to:"/"},n.a.createElement(C.a,{block:!0},"Return to Main Menu")),n.a.createElement(y.a,{className:"MoveList",size:"small",bordered:"true",header:n.a.createElement("div",null,"Move List"),dataSource:this.ChessController.moveList,renderItem:function(e){return n.a.createElement(y.a.Item,{style:{marginBottom:"0px"}},n.a.createElement("p",{className:"SmallFont"},e))}}))}},{key:"render",value:function(){var e=this.renderBoard(),t=this.renderMenu();return n.a.createElement(E.a,{className:"Centered"},e,t)}}]),i}(a.Component);i(291);function x(e){return n.a.createElement("div",{className:"MenuCard"},n.a.createElement(g.b,{to:{pathname:"/play",state:{option:e.option}}},n.a.createElement(k.a,{cover:n.a.createElement("img",{alt:e.title,src:e.img})},n.a.createElement(k.a.Meta,{title:e.title}))))}function H(e){return n.a.createElement("div",{className:"MenuCard"},n.a.createElement(k.a,{className:"HideOnHover",cover:n.a.createElement("img",{alt:e.title,src:e.img})},n.a.createElement(k.a.Meta,{title:e.title})),n.a.createElement("div",{className:"Underneath"},n.a.createElement(E.a,{className:"Row"},n.a.createElement(g.b,{to:{pathname:"/play",state:{computerOption:e.computerOption,playerColor:"white"}}},n.a.createElement(k.a,{className:"Choice",bordered:!0,cover:n.a.createElement("img",{alt:e.title,src:e.img})},n.a.createElement(k.a.Meta,{title:"Play as White"}))),n.a.createElement(g.b,{to:{pathname:"/play",state:{computerOption:e.computerOption,playerColor:"black"}}},n.a.createElement(k.a,{className:"Choice",bordered:!0,cover:n.a.createElement("img",{alt:e.title,src:e.img})},n.a.createElement(k.a.Meta,{title:"Play as Black"}))))))}var A=function(){return n.a.createElement(E.a,{className:"Centered"},n.a.createElement(x,{option:"local",img:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png",title:"Local Multiplayer"}),n.a.createElement(H,{computerOption:"computer",img:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png",title:"Versus Computer"}))};var z=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(p,null),n.a.createElement(g.a,null,n.a.createElement(f.c,null,n.a.createElement(f.a,{path:"/",exact:!0,component:A}),n.a.createElement(f.a,{path:"/play",exact:!0,component:q})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.4356eec3.chunk.js.map