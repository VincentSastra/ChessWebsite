(this["webpackJsonpchess-client"]=this["webpackJsonpchess-client"]||[]).push([[0],{133:function(e,t,i){},134:function(e,t,i){},153:function(e,t,i){},271:function(e,t,i){},276:function(e,t,i){"use strict";i.r(t);var n=i(8),s=i(0),o=i.n(s),r=i(19),c=i.n(r),a=(i(133),i(134),i(44)),l=i(24),h=(i(93),i(35)),u=i.n(h),p=(i(140),i(75)),d=i.n(p),g=(i(95),i(68)),v=i.n(g),f=(i(77),i(46)),m=i.n(f),k=(i(150),i(124)),b=i.n(k),j=i(41),y=i(42),w=i(69),C=i(127),O=i(126),P=(i(152),i(153),i(123)),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KQkq",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(j.a)(this,e),this.Tiles=x(t),this.Castle=i,this.Winner="none",this.Passant=n}return Object(y.a)(e,[{key:"getTiles",value:function(){return this.Tiles}},{key:"getTile",value:function(e,t){return this.Tiles[e][t]}},{key:"getWinner",value:function(){return this.Winner}},{key:"getPiece",value:function(e,t){return this.Tiles[e][t].getPiece()}},{key:"movePiece",value:function(e,t,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Queen",o=this.Tiles[e][t],r=this.Tiles[i][n],c=r.getPiece();switch("King"===c&&(this.Winner="white"===r.getColor()?"Black":"White"),r.piece=o.piece,o.getPiece()){case"Pawn":this.validPassant(o,r)&&(c="Pawn",this.Tiles[i][t].piece="empty"),this.handlePromotion(o,r,s);break;case"King":this.handleCastle(o,r),this.disableCastle(o);break;case"Rook":this.disableCastle(o)}return this.setPassant(o,r),o.piece="empty",c}},{key:"validPassant",value:function(e,t){return"Pawn"===e.getPiece()&&""+t.row+t.col===this.Passant}},{key:"setPassant",value:function(e,t){if("Pawn"===e.getPiece()&&2===Math.abs(t.row-e.row)){var i="white"===e.getColor()?1:-1;this.Passant=""+(e.row+i)+e.col}else this.Passant=""}},{key:"handlePromotion",value:function(e,t,i){0!==t.row&&7!==t.row||(t.piece=e.getColor()+i)}},{key:"handleCastle",value:function(e,t){Math.abs(t.col-e.col)>1&&(2===t.col?this.movePiece(e.row,0,e.row,3):6===t.col&&this.movePiece(e.row,7,e.row,5))}},{key:"disableCastle",value:function(e){var t="King"===e.getPiece()?"KQ":0===e.col?"Q":"K";"black"===e.getColor()&&(t=t.toLowerCase());var i=new RegExp(t,"");this.Castle=this.Castle.replace(i,"")}},{key:"getValidTiles",value:function(e,t){var i=this.Tiles[e][t],n=i.getColor(),s=[];switch(i.getPiece()){case"Rook":this.getValidRookTiles(t,e,n,s);break;case"Knight":this.getValidKnightTiles(t,e,n,s);break;case"Bishop":this.getValidBishopTiles(t,e,n,s);break;case"King":this.getValidKingTiles(t,e,n,s);break;case"Queen":this.getValidBishopTiles(t,e,n,s),this.getValidRookTiles(t,e,n,s);break;case"Pawn":this.getValidPawnTiles(t,e,n,s)}return s}},{key:"getValidKnightTiles",value:function(e,t,i,n){for(var s=1;s<3;s++){var o=3-s;this.pushToValid(t+s,e+o,i,n),this.pushToValid(t+s,e-o,i,n),this.pushToValid(t-s,e-o,i,n),this.pushToValid(t-s,e+o,i,n)}}},{key:"getValidRookTiles",value:function(e,t,i,n){for(var s=[-1,0,0,1],o=[0,-1,1,0],r=0;r<4;r++)for(var c=s[r]+t,a=o[r]+e;this.pushToValid(c,a,i,n);)c+=s[r],a+=o[r]}},{key:"getValidBishopTiles",value:function(e,t,i,n){for(var s=0;s<5;s++)for(var o=s<1.5?1:-1,r=e+o,c=s%2?1:-1,a=t+c;this.pushToValid(a,r,i,n);)r+=o,a+=c}},{key:"getValidKingTiles",value:function(e,t,i,n){for(var s=-1;s<2;s++)for(var o=-1;o<2;o++)this.pushToValid(t+s,e+o,i,n);var r="white"===i?0:7;("white"===i&&this.Castle.includes("K")||"black"===i&&this.Castle.includes("k"))&&"empty"===this.Tiles[r][6].getColor()&&"empty"===this.Tiles[r][5].getColor()&&n.push(this.Tiles[r][6]),("white"===i&&this.Castle.includes("Q")||"black"===i&&this.Castle.includes("q"))&&"empty"===this.Tiles[r][1].getColor()&&"empty"===this.Tiles[r][2].getColor()&&"empty"===this.Tiles[r][3].getColor()&&n.push(this.Tiles[r][2])}},{key:"getValidPawnTiles",value:function(e,t,i,n){for(var s=1===t||6===t?3:2,o="white"===i?1:-1,r=1;r<s;r++){var c=t+r*o;if(c>7||c<0)break;if("empty"!==this.Tiles[c][e].piece)break;this.pushToValid(t+r*o,e,i,n)}this.pushToValidPawn(t+o,e+1,i,n),this.pushToValidPawn(t+o,e-1,i,n)}},{key:"pushToValid",value:function(e,t,i,n){if(e>7||e<0||t>7||t<0)return!1;var s=this.Tiles[e][t];return"empty"===s.getColor()?(n.push(s),!0):(s.getColor()!==i&&n.push(s),!1)}},{key:"pushToValidPawn",value:function(e,t,i,n){if(e>-1&&e<8&&t>-1&&t<8){var s=this.Tiles[e][t];(""+s.row+s.col===this.Passant||"empty"!==s.getColor()&&s.getColor()!==i||""+s.row+s.col===this.Passant)&&n.push(s)}}},{key:"clone",value:function(){return new e(this.Tiles.map((function(e){return e.map((function(e){return e.piece}))})),this.Castle,this.Passant)}}]),e}();function x(e){for(var t=[],i=0;i<8;i++){for(var n=[],s=0;s<8;s++)n.push(new M(i,s,e[i][s]));t.push(n)}return t}function B(){for(var e=[],t=0;t<8;t++){for(var i=[],n=0;n<8;n++)i.push(V(t,n));e.push(i)}return e}function V(e,t){if(e<1)switch(Math.abs(7-2*t)){case 7:return"whiteRook";case 5:return"whiteKnight";case 3:return"whiteBishop";case 1:return 4===t?"whiteKing":"whiteQueen";default:return"empty"}else{if(e<2)return"whitePawn";if(e<6)return"empty";if(e<7)return"blackPawn";if(e<8)switch(Math.abs(7-2*t)){case 7:return"blackRook";case 5:return"blackKnight";case 3:return"blackBishop";case 1:return 4===t?"blackKing":"blackQueen";default:return"empty"}}}var M=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.generatePiece(t,i);Object(j.a)(this,e),this.row=t,this.col=i,this.piece=n}return Object(y.a)(e,[{key:"getColor",value:function(){return this.piece.substr(0,5)}},{key:"getPiece",value:function(){return this.piece.substr(5)}},{key:"clone",value:function(){return new e(this.row,this.col,this.piece)}}]),e}(),L={Queen:90,King:2e3,Rook:50,Knight:30,Bishop:30,Pawn:10,"":0};function K(e,t,i){if(0===i){return{futureMove:"",futureValue:0}}var n="white"===t?"black":"white";i=Math.min(i,5);for(var s="",o="nodef",r=function(r){for(var c=function(c){e.Tiles[r][c].piece.substr(0,5)===t&&e.getValidTiles(r,c).forEach((function(a){var l=e.clone(),h=L[l.movePiece(r,c,a.row,a.col)],u=K(l,n,i-1),p=u.futureMove,d=u.futureValue;"white"===t?("nodef"===o||h+d>o)&&(o=d+h,s=""+r+c+a.row+a.col+p):("nodef"===o||-h+d<o)&&(o=d-h,s=""+r+c+a.row+a.col+p)}))},a=0;a<8;a++)c(a)},c=0;c<8;c++)r(c);return{futureMove:s,futureValue:o}}function N(){var e=Object(P.a)([""]);return N=function(){return e},e}var W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.afterVictoryCallback,n=void 0===i?function(){}:i,s=t.computerOption,o=void 0===s?"local":s,r=t.playerColor,c=void 0===r?"white":r;Object(j.a)(this,e),this.getComputerMove=K,this.ChessLogic=new T,this.Blocks=this.generateBlocks(),this.turn="white",this.emptyBlock="empty",this.selectedBlock=this.emptyBlock,this.computerOption=o,this.playerColor=c,this.moveList=[],this.aftermatch=!1,this.showVictoryScreen=n}return Object(y.a)(e,[{key:"handleClick",value:function(e){this.turn!==this.playerColor&&"computer"===this.computerOption||("empty"===this.selectedBlock||"empty"===this.selectedBlock.getPiece()?this.turn===e.getColor()&&(this.highlight(e),this.selectedBlock=e):this.movePiece(e)&&(this.turn="white"===this.turn?"black":"white",this.recordMove(e.getPiece().substr(5),e.row,e.col),this.checkWinner()))}},{key:"handleComputerTurn",value:function(){if(this.turn!==this.playerColor&&"computer"===this.computerOption){var e=K(this.ChessLogic,this.turn,4).futureMove.split(N()).map((function(e){return+e}));this.recordMove(this.ChessLogic.getPiece(e[0],e[1]),e[2],e[3]),this.ChessLogic.movePiece(e[0],e[1],e[2],e[3]),this.turn="white"===this.turn?"black":"white",this.checkWinner()}}},{key:"recordMove",value:function(e,t,i){this.moveList.push(this.moveList.length+1+". \t"+e+" move to "+String.fromCharCode(i+65)+(t+1))}},{key:"checkWinner",value:function(){"none"===this.ChessLogic.getWinner()||this.aftermatch||(this.aftermatch=!0,this.showVictoryScreen(this.ChessLogic.getWinner()))}},{key:"movePiece",value:function(e){var t=!1;return"HighlightBlock"===e.type&&(this.ChessLogic.movePiece(this.selectedBlock.row,this.selectedBlock.col,e.row,e.col),t=!0),this.selectedBlock=this.emptyBlock,this.unhighlight(),t}},{key:"highlight",value:function(e){var t=this;this.ChessLogic.getValidTiles(e.row,e.col).forEach((function(e){return t.getBlock(e).highlight()}))}},{key:"unhighlight",value:function(){this.Blocks.forEach((function(e){return e.forEach((function(e){return e.unhighlight()}))}))}},{key:"generateBlocks",value:function(){for(var e=[],t=0;t<8;t++){for(var i=[],n=0;n<8;n++)i.push(new R(t,n,this.ChessLogic.getTile(t,n)));e.push(i)}return e}},{key:"getBlock",value:function(e){return this.Blocks[e.row][e.col]}}]),e}(),R=function(){function e(t,i,n){Object(j.a)(this,e),this.row=t,this.col=i,this.tile=n,this.unhighlight()}return Object(y.a)(e,[{key:"highlight",value:function(){this.type="HighlightBlock"}},{key:"unhighlight",value:function(){this.type=(this.row+this.col)%2?"LightBlock":"DarkBlock"}},{key:"getColor",value:function(){return this.tile.getColor()}},{key:"getPiece",value:function(){return this.tile.getColor()+this.tile.getPiece()}}]),e}(),S=W,Q=function(e){Object(C.a)(i,e);var t=Object(O.a)(i);function i(e){var n;return Object(j.a)(this,i),n=t.call(this,e),console.log(e.location.state),void 0===e.location.state&&(e.location.state={computerOption:"local",playerColor:"white"}),n.ChessController=new S({afterVictoryCallback:n.showVictoryScreen,computerOption:e.location.state.computerOption,playerColor:e.location.state.playerColor}),n.state={Blocks:n.ChessController.Blocks},n.handleClick=n.handleClick.bind(Object(w.a)(n)),n}return Object(y.a)(i,[{key:"handleClick",value:function(e){var t=this;this.ChessController.handleClick(e),this.forceUpdate(),setTimeout((function(){t.ChessController.handleComputerTurn(),t.forceUpdate()}),1)}},{key:"getImagePath",value:function(e){return"".concat("/pieceImages/",e,".png")}},{key:"showVictoryScreen",value:function(e){b.a.info({title:e+" Wins!",content:Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:"Return to main menu for new game"})}),onOk:function(){}})}},{key:"renderBoard",value:function(){var e=this,t=this.state.Blocks.slice(0).reverse().map((function(t){var i=t.map((function(t){return Object(n.jsx)("div",{onClick:e.handleClick.bind(e,t),className:t.type,children:"empty"===t.getPiece()?null:Object(n.jsx)("img",{src:e.getImagePath(t.getPiece()),className:t.type+"Piece",alt:t.getPiece()})},t.col+8*t.row)}));return Object(n.jsx)(m.a,{children:i},i[0].key/8)}));return Object(n.jsx)("div",{className:"Square",children:t})}},{key:"renderMenu",value:function(){return Object(n.jsxs)(u.a,{className:"SideMenu",children:[Object(n.jsx)(a.b,{to:"/",children:Object(n.jsx)(v.a,{block:!0,children:"Return to Main Menu"})}),Object(n.jsx)(d.a,{className:"MoveList",size:"small",bordered:"true",header:Object(n.jsx)("div",{children:"Move List"}),dataSource:this.ChessController.moveList,renderItem:function(e){return Object(n.jsx)(d.a.Item,{style:{marginBottom:"0px"},children:Object(n.jsx)("p",{className:"SmallFont",children:e})})}})]})}},{key:"render",value:function(){var e=this.renderBoard(),t=this.renderMenu();return Object(n.jsxs)(m.a,{className:"Centered",children:[e,t]})}}]),i}(s.Component);i(271);function E(e){return Object(n.jsx)("div",{className:"MenuCard",children:Object(n.jsx)(a.b,{to:{pathname:"/play",state:{option:e.option}},children:Object(n.jsx)(u.a,{cover:Object(n.jsx)("img",{alt:e.title,src:e.img}),children:Object(n.jsx)(u.a.Meta,{title:e.title})})})})}function I(e){return Object(n.jsxs)("div",{className:"MenuCard",children:[Object(n.jsx)(u.a,{className:"HideOnHover",cover:Object(n.jsx)("img",{alt:e.title,src:e.img}),children:Object(n.jsx)(u.a.Meta,{title:e.title})}),Object(n.jsx)("div",{className:"Underneath",children:Object(n.jsxs)(m.a,{className:"Row",children:[Object(n.jsx)(a.b,{className:"Link",to:{pathname:"/play",state:{computerOption:e.computerOption,playerColor:"white"}},children:Object(n.jsx)(u.a,{className:"Choice",bordered:!0,cover:Object(n.jsx)("img",{alt:e.title,src:"menu/white.jpg"}),children:Object(n.jsx)(u.a.Meta,{title:"Play as White"})})}),Object(n.jsx)(a.b,{className:"Link",to:{pathname:"/play",state:{computerOption:e.computerOption,playerColor:"black"}},children:Object(n.jsx)(u.a,{className:"Choice",bordered:!0,cover:Object(n.jsx)("img",{alt:e.title,src:"menu/black.jpg"}),children:Object(n.jsx)(u.a.Meta,{title:"Play as Black"})})})]})})]})}var H=function(){return Object(n.jsxs)(m.a,{className:"Centered",children:[Object(n.jsx)(E,{option:"local",img:"menu/local.jpg",title:"Local Multiplayer"}),Object(n.jsx)(I,{computerOption:"computer",img:"menu/computer.jpg",title:"Versus Computer"})]})};var q=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("header",{className:"App-header",children:Object(n.jsx)(a.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/",exact:!0,component:H}),Object(n.jsx)(l.a,{path:"/play",exact:!0,component:Q})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[276,1,2]]]);
//# sourceMappingURL=main.b06c082b.chunk.js.map